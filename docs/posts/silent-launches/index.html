<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>The Art of Silent Launches | lautaromitelman.com</title>
<meta name="keywords" content="">
<meta name="description" content="Personal lessons from the trenches about my experience with gradual rollouts of features.">
<meta name="author" content="lmitelman">
<link rel="canonical" href="https://lmitelman.github.io/posts/silent-launches/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.324caf84a4f9665cfb62b27ad41d10934ca1e436be3c3f9c5384bc2ae69f71cc.css" integrity="sha256-MkyvhKT5Zlz7YrJ61B0Qk0yh5Da&#43;PD&#43;cU4S8Kuafccw=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://lmitelman.github.io/favicon.ico">
<link rel="apple-touch-icon" href="https://lmitelman.github.io/apple-touch-icon.png">

<meta name="twitter:title" content="The Art of Silent Launches | lautaromitelman.com" />
<meta name="twitter:description" content="Personal lessons from the trenches about my experience with gradual rollouts of features." />
<meta property="og:title" content="The Art of Silent Launches | lautaromitelman.com" />
<meta property="og:description" content="Personal lessons from the trenches about my experience with gradual rollouts of features." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://lmitelman.github.io/posts/silent-launches/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2024-01-26T15:33:12-03:00" />
  <meta property="article:modified_time" content="2024-01-26T15:33:12-03:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://lmitelman.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "The Art of Silent Launches",
      "item": "https://lmitelman.github.io/posts/silent-launches/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "The Art of Silent Launches | lautaromitelman.com",
  "name": "The Art of Silent Launches",
  "description": "Personal lessons from the trenches about my experience with gradual rollouts of features.",
  "keywords": [
    
  ],
  "wordCount" : "799",
  "inLanguage": "en",
  "datePublished": "2024-01-26T15:33:12-03:00",
  "dateModified": "2024-01-26T15:33:12-03:00",
  "author":{
    "@type": "Person",
    "name": "lmitelman"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://lmitelman.github.io/posts/silent-launches/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "lautaromitelman.com",
    "logo": {
      "@type": "ImageObject",
      "url": "https://lmitelman.github.io/favicon.ico"
    }
  }
}
</script>
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>

</head>

<body class=" dark type-posts kind-page layout-" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'dark';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://lmitelman.github.io/" accesskey="h" title="lautaromitelman.com (Alt + H)">lautaromitelman.com</a>
            <span class="logo-switches">
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://lmitelman.github.io/posts/" title="Posts" class="active"
                >Posts
                </a>
            </li>
            <li>
                <a href="https://lmitelman.github.io/search/" title="Search (Alt &#43; /)"data-no-instant accesskey=/
                >Search
                </a>
            </li>
            <li>
                <a href="https://lmitelman.github.io/categories/" title="Categories"
                >Categories
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <h1 class="post-title">The Art of Silent Launches<sup><span class="entry-isdraft">&nbsp;&nbsp;[draft]</span></sup></h1>
    <div class="post-description">Personal lessons from the trenches about my experience with gradual rollouts of features.</div>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>January 26, 2024</span></span><span class="meta-item">
  <span class="post-tags"><a href="https://lmitelman.github.io/categories/software-engineering/">Software Engineering</a></span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="12" cy="12" r="9"></circle><polyline points="12 7 12 12 15 15"></polyline></svg>
  <span>4 min</span></span>

      
      
    </div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul><ul><ul>
                <li>
                    <a href="#dark-launching" aria-label="Dark Launching">Dark Launching</a></li>
                <li>
                    <a href="#canary-release" aria-label="Canary Release">Canary Release</a><ul>
                        
                <li>
                    <a href="#feature-toggles" aria-label="Feature Toggles">Feature Toggles</a></li></ul>
                </li>
                <li>
                    <a href="#shadow-testing" aria-label="Shadow Testing">Shadow Testing</a></li>
                <li>
                    <a href="#tldr" aria-label="TL;DR">TL;DR</a></li></ul>
                    </ul>
                    
                <li>
                    <a href="#" aria-label="Acknowledgements">Acknowledgements</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>This blog post recalls my personal experience at a company that had a digital wallet service, used by over 3 million people.</p>
<p>During my time there, my team and I were deeply involved in creating a new feature that was in high demand by our users. When we notified them about its launch, we didn&rsquo;t expect the overwhelming response it received.</p>
<p>A huge number of users immediately tried the new feature, leading to an unexpected and massive surge in traffic. Our tech infrastructure, unprepared for such a load, was overwhelmed and eventually collapsed.</p>
<p>After recounting this challenging experience, now let&rsquo;s look at some better ways to introduce new features without running into these problems using different strategies of <strong>Gradual Rollouts</strong>, a phased approach in engineering for releasing updates. It enables testing stability and performance with a limited audience, identifying issues with minimal overall user impact.</p>
<p style="margin-top: 45px;"></p>
<h3 id="dark-launching">Dark Launching<a hidden class="anchor" aria-hidden="true" href="#dark-launching">Â¶</a></h3>
<p>Dark Launching is primarily a backend technique that involves introducing a new (or modified) feature, which is then activated for current users without their knowledge. This technique provides insights into how the feature would be behaving in production, without actually impacting users.</p>
<img src="/images/dark-launching.png" alt="Dark Launching" style="width:90%; height:auto;">
<p>We adjust the flow to call <em>Feature</em> 3 as it would in production, doing all the work but without displaying any results, so nobody can see that it&rsquo;s doing it.</p>
<p>Dark launching enables test engineers to evaluate new features in a real-world setting without impacting users. This process allows for performance testing, issue detection, infrastructure scaling assessments and stress testing under actual traffic conditions. Essentially, it offers a safer, more effective way to ensure new updates are ready for broader release.</p>
<blockquote>
<p>ðŸ’¡ <span style="color: #9B9C9D;">
The concept of <strong>Dark Launching</strong> has evolved over time, leading to some confusion. Nowadays, it&rsquo;s often used interchangeably with the concept of <strong>Canary Release</strong>.
</span></p>
</blockquote>
<p style="margin-top: 45px;"></p>
<h3 id="canary-release">Canary Release<a hidden class="anchor" aria-hidden="true" href="#canary-release">Â¶</a></h3>
<p>Canary Release is a method used to minimize the risk of deploying new versions by initially introducing the update to a small group of users. This approach involves gradually extending the update across the entire system.</p>
<p>This technique starts with the new version being deployed to a part of the infrastructure not yet accessed by users, and then the process continues by gradually routing some user traffic to the  new version.</p>
<img src="/images/canary-release.png" alt="Canary Release" style="width:90%; height:auto;">
<p style="margin-top: 30px;"></p>
<p>The term is derived from an <a href="https://www.smithsonianmag.com/smart-news/story-real-canary-coal-mine-180961570/">old mining practice</a>, where miners took canaries into mines as an early warning system against toxic gases. Just as the canary would alert miners to danger, a canary release detects potential issues in a software update before it affects all users.</p>
<p>In modern distributed systems, instead of using a router for this process, various strategies are employed. These include rolling out updates to specific geographic regions first or to specific user groups based on criteria like user behavior, device type, or membership tier. Load-based rollouts are another option, where the new version is deployed during off-peak hours or low-activity periods to minimize potential impact.</p>
<h4 id="feature-toggles">Feature Toggles<a hidden class="anchor" aria-hidden="true" href="#feature-toggles">Â¶</a></h4>
<p>Alongside the mentioned strategies for implementing Canary Releases, <strong>Feature Toggles</strong> enable the introduction of new features within the same environment. This method facilitates incremental rollouts to selected user groups, streamlining the release process and reducing the need for maintaining multiple environments or versions.</p>
<img src="/images/feature-toggle.png" alt="Feature Toggles" style="width:80%; height:auto;">
<blockquote>
<p>ðŸ’¡ <span style="color: #9B9C9D;"> <strong>Feature Toggle</strong> is also referred to as <strong>Feature Flag</strong> in some engineering contexts, highlighting its role in enabling and disabling certain features.
</span></p>
</blockquote>
<p style="margin-top: 45px;"></p>
<h3 id="shadow-testing">Shadow Testing<a hidden class="anchor" aria-hidden="true" href="#shadow-testing">Â¶</a></h3>
<p>Shadow testing is a technique used to compare the current environment with a new one that includes a new feature. Its purpose is to identify and reduce potential risks before releasing the new feature to users, all without users ever knowing it&rsquo;s happening.</p>
<p>In shadow testing, we observe how real users interact with our system by examining their actual traffic, all without impacting the code or the experience of users in the production environment.</p>
<img src="/images/shadow-testing.png" alt="Shadow Testing" style="width:150%; height:auto;">
<p>A replica of the production environment is created to mimic real user traffic. This environment serves as a <em>shadow</em> of the production environment. The new feature is then tested in a different environment. After testing, the responses from both environments are compared by test engineers to identify any risks before introducing the new feature to the production environment.</p>
<p style="margin-top: 45px;"></p>
<h3 id="tldr">TL;DR<a hidden class="anchor" aria-hidden="true" href="#tldr">Â¶</a></h3>
<table>
<thead>
<tr>
<th>GradualÂ RolloutÂ Strategy</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Dark Launching</strong></td>
<td>Deploying a feature in production without making it visible to users. The functionality is <em>dark</em> to users, but can be selectively enabled for testing purposes.</td>
</tr>
<tr>
<td><strong>Canary Release</strong></td>
<td>Rolling out a new feature incrementally to a small subset of users before a full deployment, often implemented through the use of <strong>Feature Toggles</strong></td>
</tr>
<tr>
<td><strong>Shadow Testing</strong></td>
<td>Duplicating real traffic to a parallel new service version, which processes it without affecting or being noticed by users, allowing performance and stability testing under real conditions.</td>
</tr>
</tbody>
</table>
<p style="margin-top: 45px;"></p>
<hr>
<h1 style="font-size: smaller; margin-top: 24px;">Acknowledgements</h1>
<hr>
<ul>
<li>
<p><em><a href="https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=7927896&amp;isnumber=7927880">&ldquo;The Top 10 Adages in Continuous Deployment&rdquo; by C. Parnin et al. (2017)</a></em></p>
</li>
<li>
<p><em><a href="https://www.sciencedirect.com/science/article/abs/pii/S0950584917302136?via%3Dihub">&ldquo;Weâ€™re Doing It Live&rdquo; by G. Schermann, J. Cito, P. Leitner, U. Zdun and H. C. Gall (2018)</a>.</em></p>
</li>
</ul>


  </div>

  <footer class="post-footer">
  </footer>
</article>
    </main>
    
<footer class="footer">
  <span>&copy; 2024 <a href="https://lmitelman.github.io/">lautaromitelman.com</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '1' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>
<script>
  document.querySelectorAll('pre > code').forEach((codeblock) => {
    const container = codeblock.parentNode.parentNode;

    const copybutton = document.createElement('button');
    copybutton.classList.add('copy-code');
    copybutton.innerText = 'copy';

    function copyingDone() {
      copybutton.innerText = 'copied!';
      setTimeout(() => {
        copybutton.innerText = 'copy';
      }, 2000);
    }

    copybutton.addEventListener('click', (cb) => {
      if ('clipboard' in navigator) {
        navigator.clipboard.writeText(codeblock.textContent);
        copyingDone();
        return;
      }

      const range = document.createRange();
      range.selectNodeContents(codeblock);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand('copy');
        copyingDone();
      } catch (e) { };
      selection.removeRange(range);
    });

    if (container.classList.contains("highlight")) {
      container.appendChild(copybutton);
    } else if (container.parentNode.firstChild == container) {
      
    } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
      
      codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
    } else {
      
      codeblock.parentNode.appendChild(copybutton);
    }
  });
</script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
